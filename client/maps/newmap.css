/* =========================
   MODIFIED MODERN STYLE
   ========================= */

/* Bold compact Google Font for cell names */
@import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@700;900&display=swap');

/* DARK BOARD BACKGROUND */
.board {
  background: radial-gradient(circle at top left, #2b1d4f, #140f2a 70%);
}

/* CELL BASE */
.cell {
  border-radius: 18px;
  overflow: hidden;
  transition: 0.3s ease;
}

/* =========================
   FULL-CELL BACKGROUND IMAGE
   Text floats over the image
   ========================= */

/* Strip the default dark gradient so the image shows */
.has-cell-bg {
  background: #111827 !important;   /* fallback colour before image loads */
}

/* The image fills the entire cell */
.cell-bg-img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

/* Dark gradient overlay so text is always readable */
.has-cell-bg::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to top,
    rgba(0, 0, 0, 0.82) 0%,
    rgba(0, 0, 0, 0.45) 45%,
    rgba(0, 0, 0, 0.18) 100%
  );
  z-index: 1;
  pointer-events: none;
  border-radius: inherit;
}

/* Gradient direction for side cells (name is in the middle vertically) */
.has-cell-bg.right::after {
  background: linear-gradient(
    to right,
    rgba(0, 0, 0, 0.15) 0%,
    rgba(0, 0, 0, 0.55) 100%
  );
}
.has-cell-bg.left::after {
  background: linear-gradient(
    to left,
    rgba(0, 0, 0, 0.15) 0%,
    rgba(0, 0, 0, 0.55) 100%
  );
}

/* All direct cell children sit above the bg image and overlay */
.has-cell-bg .cell-color,
.has-cell-bg .cell-name,
.has-cell-bg .cell-flag,
.has-cell-bg .cell-icon {
  position: relative;
  z-index: 5;
}

/* Cell name: transparent background, heavy text shadow for legibility */
.has-cell-bg .cell-name {
  background: transparent !important;
  font-family: 'Exo 2', 'Poppins', sans-serif !important;
  font-size: 11px !important;
  font-weight: 900 !important;
  letter-spacing: 0.03em !important;
  line-height: 1.3 !important;
  color: #ffffff !important;
  text-transform: uppercase;
  text-shadow:
    0 1px 0 rgba(0, 0, 0, 1),
    0 2px 6px rgba(0, 0, 0, 1),
    0 0 14px rgba(0, 0, 0, 0.9) !important;
}

/* Colour bar is not used in newmap — flag badge replaces it */
/* .has-cell-bg .cell-color { opacity: 0.88; } */

@media (max-width: 768px) {
  .has-cell-bg .cell-name { font-size: 10px !important; }
  .has-cell-bg.corner .cell-name { font-size: 12px !important; }
}
@media (max-width: 480px) {
  .has-cell-bg .cell-name { font-size: 8px !important; }
  .has-cell-bg.corner .cell-name { font-size: 10px !important; }
}

/* PROPERTY BASE */
.cell .property {
  border-radius: 18px;
  padding: 8px;
  font-weight: 600;
  color: white;
  transition: all 0.3s ease;
}

/* HOVER EFFECT (Soft Neon Glow) */
.cell:hover {
  transform: translateY(-4px);
  box-shadow:
    0 8px 20px rgba(0, 0, 0, 0.4),
    0 0 12px rgba(255, 255, 255, 0.2);
}

/* =========================
   UPDATED COUNTRY COLORS
   ========================= */

/* JAPAN (Soft Pink Neon) */
.color-japan {
  background: linear-gradient(145deg, #ff7eb3, #ff4f9f);
  box-shadow: 0 6px 15px rgba(255, 79, 159, 0.4);
}

/* SPAIN (Warm Gold/Red Neon) */
.color-spain {
  background: linear-gradient(145deg, #ff9966, #ff5e62);
  box-shadow: 0 6px 15px rgba(255, 94, 98, 0.4);
}

/* CANADA (Cool Green Neon) */
.color-canada {
  background: linear-gradient(145deg, #4ade80, #22c55e);
  box-shadow: 0 6px 15px rgba(34, 197, 94, 0.4);
}

/* INDIA (Orange Neon) */
.color-india {
  background: linear-gradient(145deg, #ffb347, #ff8008);
  box-shadow: 0 6px 15px rgba(255, 128, 8, 0.4);
}

/* AUSTRALIA (Purple Neon) */
.color-australia {
  background: linear-gradient(145deg, #c084fc, #9333ea);
  box-shadow: 0 6px 15px rgba(147, 51, 234, 0.4);
}

/* MEXICO (Teal Neon) */
.color-mexico {
  background: linear-gradient(145deg, #2dd4bf, #0ea5e9);
  box-shadow: 0 6px 15px rgba(14, 165, 233, 0.4);
}

/* SOUTH AFRICA (Dark Blue Neon) */
.color-southafrica {
  background: linear-gradient(145deg, #3b82f6, #1e40af);
  box-shadow: 0 6px 15px rgba(30, 64, 175, 0.4);
}

/* SWEDEN (Yellow Neon) */
.color-sweden {
  background: linear-gradient(145deg, #fde047, #facc15);
  box-shadow: 0 6px 15px rgba(250, 204, 21, 0.4);
}

/* RAILROAD */
.color-railroad {
  background: linear-gradient(145deg, #9ca3af, #6b7280);
  box-shadow: 0 6px 15px rgba(107, 114, 128, 0.4);
}

/* UTILITY */
.color-utility {
  background: linear-gradient(145deg, #38bdf8, #0ea5e9);
  box-shadow: 0 6px 15px rgba(14, 165, 233, 0.4);
}

/* =========================
   HOVER BRIGHTEN EFFECT
   ========================= */

.cell:hover .color-japan,
.cell:hover .color-spain,
.cell:hover .color-canada,
.cell:hover .color-india,
.cell:hover .color-australia,
.cell:hover .color-mexico,
.cell:hover .color-southafrica,
.cell:hover .color-sweden,
.cell:hover .color-railroad,
.cell:hover .color-utility {
  filter: brightness(1.15) saturate(1.2);
}

/* =========================
   CIRCULAR FLAG BADGE
   Positioned absolutely on .cell — centred over the colour bar.
   Emoji flag shows as fallback; PNG image covers it when provided.
   ========================= */

/*
  Top & bottom row cells:
  Flag sits near the top of the cell (no colour bar — flag IS the indicator).
*/
.cell-flag {
  position: absolute;
  z-index: 15;
  pointer-events: none;

  width: 40px;
  height: 40px;
  top: 24px;          /* centre of badge = 24px from top of cell */
  left: 50%;
  transform: translate(-50%, -50%);

  border-radius: 50%;
  border: 2.5px solid rgba(255, 255, 255, 0.98);
  box-shadow:
    0 3px 8px rgba(0, 0, 0, 0.7),
    0 0 0 1.5px rgba(0, 0, 0, 0.3);
  overflow: visible;

  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  line-height: 1;
  background: rgba(20, 20, 20, 0.55);
}

/* Right column (right side of board) — flag on RIGHT edge */
.right .cell-flag {
  top: 50%;
  left: auto;
  right: 14px;                   /* flag on RIGHT */
  transform: translate(50%, -50%);
  width: 28px;
  height: 28px;
  font-size: 17px;
  border-width: 2px;
}

/* Left column (left side of board) — flag on LEFT edge */
.left .cell-flag {
  top: 50%;
  left: 14px;                    /* flag on LEFT */
  right: auto;
  transform: translate(-50%, -50%);
  width: 28px;
  height: 28px;
  font-size: 17px;
  border-width: 2px;
}

/* PNG image — covers emoji once the file is provided; clipped to circle */
.cell-flag-img {
  position: absolute;
  top: -2px;
  left: -2px;
  width: calc(100% + 4px);
  height: calc(100% + 4px);
  object-fit: cover;
  border-radius: 50%;
  z-index: 2;
  clip-path: circle(50%);
}

/* =========================
   PRICE BADGE
   Stacks as a flex item BELOW the cell name.
   Flag (absolute) occupies the top area;
   padding-top on the cell pushes flow content below the flag.
   ========================= */

/* Reserve space under flag for top/bottom cells */
.has-cell-bg.top,
.has-cell-bg.bottom {
  padding-top: 44px;      /* flag circle bottom edge = ~44px from top */
  justify-content: flex-end;
}

/* Cell name: centred in whatever space remains, order 1 */
.has-cell-bg.top .cell-name,
.has-cell-bg.bottom .cell-name {
  order: 1;
  flex: 1;
  align-items: center !important;
}

/* ── RIGHT column name ──
   Flag is on the RIGHT edge. Push text to the LEFT of the flag.
   vertical-rl = top→bottom, columns stack right→left (away from right flag) */
.has-cell-bg.right .cell-name {
  padding-right: 30px !important;  /* clear the 28px right-edge flag */
  padding-left: 3px !important;
  padding-bottom: 18px !important; /* clear the price badge */
  writing-mode: vertical-rl !important;
  font-size: 0.55em !important;
  overflow: hidden;
}

/* ── LEFT column name ──
   Flag is on the LEFT edge. Push text to the RIGHT of the flag.
   vertical-lr = top→bottom, columns stack left→right (away from left flag) */
.has-cell-bg.left .cell-name {
  padding-left: 30px !important;   /* clear the 28px left-edge flag */
  padding-right: 3px !important;
  padding-bottom: 18px !important; /* clear the price badge */
  writing-mode: vertical-lr !important;
  font-size: 0.55em !important;
  overflow: hidden;
}

/* Price badge: flow item, sits after name at the bottom */
.newmap-price {
  position: relative;       /* flow — NOT absolute */
  z-index: 16;
  order: 2;                 /* always after cell-name */
  pointer-events: none;
  align-self: center;
  flex-shrink: 0;
  margin: 0 auto 3px;
  padding: 2px 7px;
  background: rgba(0, 0, 0, 0.80);
  border: 1.5px solid rgba(52, 211, 153, 0.6);
  border-radius: 7px;
  font-family: 'Exo 2', 'Poppins', sans-serif;
  font-size: 11px;
  font-weight: 900;
  color: #34d399;
  text-shadow: 0 0 8px rgba(52, 211, 153, 0.8);
  white-space: nowrap;
  letter-spacing: 0.02em;
}

/* Right column — cell is flex-row; price sits at bottom of cell absolutely */
.has-cell-bg.right .newmap-price,
.has-cell-bg.left .newmap-price {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  order: 0;     /* resets flex-row ordering */
  margin: 0;
  font-size: 10px;
  padding: 1px 5px;
}

/* Hide the duplicate cell-info price that renderState injects */
.has-cell-bg .cell-info {
  display: none !important;
}

/* =========================
   SPECIAL CELL ICONS
   (airport, jail, vacation, surprise, treasure…)
   ========================= */

/*
  Non-corner cells: icon is a FLEX FLOW child.
  It sits between the colour bar and the name — no overlap.
*/
.cell-icon {
  flex: 1;
  min-height: 0;
  min-width: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  font-size: 20px;
  line-height: 1;
  pointer-events: none;
}

/*
  Corner cells: icon is ABSOLUTELY centred (covers the whole cell).
  The name text sits on top — that layering is intentional for corners.
*/
.cell-icon-corner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 55%;
  height: 55%;
  flex: none;
  font-size: 26px;
  z-index: 3;
}

/* Emoji fallbacks — shown when the PNG image is not yet provided */
.cell-icon-airport::before  { content: '✈'; color: #c0d8ff; }
.cell-icon-surprise::before { content: '?'; color: #ffd700; font-weight: 900; font-size: 19px; }
.cell-icon-treasure::before { content: '★'; color: #ffd700; }
.cell-icon-utility::before  { content: '⚡'; color: #38bdf8; }
.cell-icon-go::before       { content: '▶'; color: #4ade80; }
.cell-icon-jail::before     { content: '⛓'; color: #f87171; }
.cell-icon-vacation::before { content: '☀'; color: #fbbf24; }
.cell-icon-gotojail::before { content: '⛔'; font-size: 18px; }

/* PNG image fills the icon container */
.cell-icon-img {
  max-width: 85%;
  max-height: 85%;
  width: auto;
  height: auto;
  object-fit: contain;
  position: relative;
  z-index: 2;
}

/* Neon glow per icon type */
.cell-icon-airport  { filter: drop-shadow(0 0 5px rgba(192, 216, 255, 0.8)); }
.cell-icon-surprise { filter: drop-shadow(0 0 6px rgba(255, 215,   0, 0.9)); }
.cell-icon-treasure { filter: drop-shadow(0 0 8px rgba(255, 215,   0, 1.0)); }
.cell-icon-utility  { filter: drop-shadow(0 0 6px rgba( 56, 189, 248, 0.8)); }
.cell-icon-go       { filter: drop-shadow(0 0 8px rgba( 74, 222, 128, 0.9)); }
.cell-icon-jail     { filter: drop-shadow(0 0 5px rgba(248, 113, 113, 0.7)); }
.cell-icon-vacation { filter: drop-shadow(0 0 8px rgba(251, 191,  36, 0.9)); }
.cell-icon-gotojail { filter: drop-shadow(0 0 6px rgba(248, 113, 113, 0.8)); }